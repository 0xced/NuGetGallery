<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="NuGet.Services.Work.Cloud" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2013-10.2.2">
    <WorkerRole name="NuGet.Services.Work" vmsize="Small">
        <Imports>
            <Import moduleName="Diagnostics" />
            <Import moduleName="RemoteAccess" />
            <Import moduleName="RemoteForwarder" />
        </Imports>
        <ConfigurationSettings>
            <Setting name="Host.Datacenter" />
            <!-- The index of the datacenter, because we can't easily get that from Azure :( -->
            <Setting name="Host.Environment" />
            <!-- The name of the environment (i.e. int, prod, etc.) -->
            <Setting name="Host.Name" />
            <!-- The name of the service host -->
            <Setting name="Storage.Primary" />
            <Setting name="Storage.Backup" />
            <Setting name="Sql.Primary" />
            <Setting name="Sql.Legacy" />
            <Setting name="Sql.Warehouse" />
            <Setting name="Queue.PollInterval" />
            <Setting name="Http.AdminKey" />
        </ConfigurationSettings>
        <Certificates>
            <Certificate name="SSL" permissionLevel="limitedOrElevated" storeLocation="LocalMachine" storeName="My" />
        </Certificates>
        <LocalResources>
            <LocalStorage name="Logs" cleanOnRoleRecycle="false" sizeInMB="2048" />
        </LocalResources>
        <Endpoints>
            <InputEndpoint name="http" protocol="http" port="80" localPort="80" />
            <InputEndpoint name="https" protocol="https" port="443" localPort="443" certificate="SSL" />
            <InstanceInputEndpoint name="http-instance" protocol="tcp" localPort="80">
                <AllocatePublicPortFrom>
                    <FixedPortRange max="8999" min="8001" />
                </AllocatePublicPortFrom>
            </InstanceInputEndpoint>
        </Endpoints>
    </WorkerRole>
</ServiceDefinition>