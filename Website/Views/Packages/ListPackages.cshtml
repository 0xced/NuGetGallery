@using NuGetGallery;
@model PackageListViewModel
@{
    ViewBag.Tab = "Packages";
    var firstResult = 1 + (Model.PageIndex * Model.PageSize);
    var resultsCount = Model.Items.Count();
    var lastResult = firstResult + resultsCount - 1;
}
<div id="layout-before-main" class="group">
    <section id="currentPageToolbar">
        <div class="zone zone-before-main">
            <form id="search-filter-form" action="@Url.Current()" method="get">
                @* TODO: This hidden input hack can go away when we fully restructure the UI*@
                <input type="hidden" name="q" value="@Model.SearchTerm" />
                <div id="sort">
                    <label>Sort</label>
                    <select name="sortOrder" id="sortOrder">
                        @ViewHelpers.Option("package-title", "A-Z", Model.SortOrder)
                        @ViewHelpers.Option("package-rating", "Highest Rated", Model.SortOrder)
                        @ViewHelpers.Option("package-download-count", "Popularity", Model.SortOrder)
                        @ViewHelpers.Option("package-created", "Recent", Model.SortOrder)
                        @ViewHelpers.Option("package-relevance", "Relevance", Model.SortOrder)
                    </select>
                </div>
            </form>
        </div>
    </section>
</div>

<div id="layout-main" class="group">
    <div id="layout-content" class="group">
        <div id="content" class="group">
            <div class="zone zone-content">
                <section>
                    <header>
                        <h2><span>@Model.TotalCount results for </span>Packages</h2>
                        @if (resultsCount > 0) {
                            <span class="displayResults">Displaying results @firstResult - @lastResult.</span>
                        }
                    </header>
                    <ul>
                        @foreach (var listPackage in Model.Items) {
                            <li class="first">
                                @Html.Partial(MVC.Packages.Views._ListPackage, listPackage)
                            </li>
                        }
                    </ul>
                    <div id="pagination">
                        @ViewHelpers.PreviousNextPager(Model.Pager)
                    </div>
                </section>
            </div>
        </div>
        
        <div id="after-content">
            <div class="zone zone-after-content">
                <div id="deleteRatingConfirmationDialogDiv" title="Confirm Deletion" style="display:none">
                    <p>When you clear your rating, if you've left a review it will also be deleted. Do you wish to proceed?</p>
                    <input type="button" value="Yes" id="confirmDeleteRatingButton" />
                    <input type="button" value="No" id="cancelDeleteRatingButton" />
                </div>
            </div>
        </div>

    </div>
</div>
@section BottomScripts {
    <link href="@Url.Content("~/Content/Contrib.Stars.css")" rel="stylesheet" type="text/css" />
}