#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.235
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace NuGetGallery.Views.Packages
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using NuGetGallery;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "1.2.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Packages/ManagePackageOwners.cshtml")]
    public class ManagePackageOwners : System.Web.Mvc.WebViewPage<ManagePackageOwnersViewModel>
    {
        public ManagePackageOwners()
        {
        }
        public override void Execute()
        {


            
            #line 2 "..\..\Views\Packages\ManagePackageOwners.cshtml"
  
    ViewBag.Tab = "Packages";


            
            #line default
            #line hidden
WriteLiteral(@"<div id=""layout-main"" class=""group"">
    <div id=""layout-content"" class=""group"">
        <div id=""content"" class=""group"">
            <div class=""zone zone-content"">
                <section>
                    <header>
                        <h2>Manage Owners for Package """);


            
            #line 11 "..\..\Views\Packages\ManagePackageOwners.cshtml"
                                                  Write(Model.Title);

            
            #line default
            #line hidden
WriteLiteral(@"""</h2>
                        <div class=""message message-Error validation-summary-errors"" data-bind=""text: message, visible: message""></div>
                    </header>
                    <div id=""form"">
                        <div>
                            <label>Current Owners</label>
                            <ul id=""package-owner-list"" data-bind=""foreach: owners"">
                                <li>
                                    <span data-bind=""text: name""></span>
                                    <a href=""#"" class=""delete"" data-bind=""visible: !current, click: remove"">Remove</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <form action=""");


            
            #line 26 "..\..\Views\Packages\ManagePackageOwners.cshtml"
                                 Write(Url.Current());

            
            #line default
            #line hidden
WriteLiteral(@""" id=""form"" method=""post"">
                            <div>
                                <label for=""newOwnerUserName"">Add New Owner</label>
                                <p>
                                    Enter an owner's username to add them as a package owner.
                                </p>
                                <aside style=""width: 357px !important;"">
                                    <p>
                                        <strong>NOTE:</strong> All package owners have full control over their packages,
                                        including the ability to remove other users as owners.</p>
                                </aside>
                                <input type=""text"" id=""newOwnerUserName"" data-bind=""value: newOwner().name"" class=""long"" />
                            </div>
                            <div class=""buttons"">   
                                <input type=""submit"" value=""Add"" data-bind=""click: addOwner"" />
                            </div>
                        </form>
                    </div>
                </section>
            </div>
    </div>
</div>
</div> 
<script src=""");


            
            #line 49 "..\..\Views\Packages\ManagePackageOwners.cshtml"
        Write(Url.Content("~/Scripts/knockout-latest.js"));

            
            #line default
            #line hidden
WriteLiteral("\" type=\"text/javascript\"></script>\n<script src=\"");


            
            #line 50 "..\..\Views\Packages\ManagePackageOwners.cshtml"
        Write(Url.Content("~/json/JsonApi?json"));

            
            #line default
            #line hidden
WriteLiteral(@""" type=""text/javascript""></script>
<script type=""text/javascript"">
    $(function() {
        //TODO Move this to its own script file when we set up QUnit tests
        var failHandler = function() {
            alert('An unexpected error occurred!');
        };

        var viewModel = {
            package: { id: '");


            
            #line 59 "..\..\Views\Packages\ManagePackageOwners.cshtml"
                       Write(Model.Id);

            
            #line default
            #line hidden
WriteLiteral("\', version: \'");


            
            #line 59 "..\..\Views\Packages\ManagePackageOwners.cshtml"
                                             Write(Model.Version);

            
            #line default
            #line hidden
WriteLiteral("\' },\n            owners: ko.observableArray([]),\n            newOwner: ko.observa" +
"ble(new Owner(null)),\n            message: ko.observable(\'\'),\n            addOwn" +
"er: function() {\n                var ownerInputModel = viewModel.newOwner().toJS" +
"();\n                ownerInputModel.id = viewModel.package.id;\n                \n" +
"                $mvc.JsonApi.AddPackageOwner(ownerInputModel)\n                  " +
"  .done(function(data) {\n                        if (data.success) {\n           " +
"                 viewModel.newOwner().name(data.name);\n                         " +
"   viewModel.owners.push(viewModel.newOwner());\n                            view" +
"Model.newOwner(new Owner(null));\n                        }\n                     " +
"   else {\n                            viewModel.message(data.message);\n         " +
"               }\n                    })\n                    .fail(failHandler);\n" +
"            },\n\n            removeOwner: function(item) {\n                var pa" +
"ckage = viewModel.package;\n                $mvc.JsonApi.RemovePackageOwner({ id:" +
" package.id, version: package.version, username: item.name() })\n                " +
"    .done(function(data) {\n                        if (data.success) {\n         " +
"                   viewModel.owners.remove(item);\n                        }\n    " +
"                    else {\n                            viewModel.message(data.me" +
"ssage);\n                        }\n                    }).fail(failHandler);\n    " +
"        }\n        };\n        ko.applyBindings(viewModel);\n\n        // Load initi" +
"al owners.\n        $mvc.JsonApi.GetPackageOwners(viewModel.package)\n        .don" +
"e(function(data) {\n            viewModel.owners($.map(data, function(item) { ret" +
"urn new Owner(item) }));\n        })\n        .fail(failHandler);\n\n        functio" +
"n Owner(item) {\n            var $this = this;\n\n            item = item || {};\n\n " +
"           this.name = ko.observable(item.name);\n            this.current = item" +
".current;\n            this.remove = function() {\n                viewModel.remov" +
"eOwner(this);\n            };\n            this.toJS = function() {\n              " +
"  return { username: this.name() };\n            };\n        }\n    });\n</script>");


        }
    }
}
#pragma warning restore 1591
