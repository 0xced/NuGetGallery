@model ContactOwnersViewModel
@{
    ViewBag.Tab = "Packages";
    Layout = "~/Views/Shared/TwoColumnLayout.cshtml";
}

@section LeftNav {
    <img src="@Links.Content.Images.sendMessageGraphic_png" style="padding-left: 55px" />
}    

@section ContentHeader {            
    <h2>Contact the Owners of <em>@Model.PackageId</em></h2>
}
@if (Model.Owners.Any()) {
    <div class="description">
        <p>
            By submitting this form, you agree to <strong>disclose your email address</strong> 
            to the package owners listed below so they can reply to you.
        </p>
    </div> 
    <form action="@Url.Current()" id="form" method="post">
        <label>
            To: @ViewHelpers.OwnersGravatar(Model.Owners, 24, Url)
        </label>
        <div @if (Html.IsError(m => m.Message)) {<text>class="invalid"</text>}>
            @Html.LabelFor(m => m.Message)
            <aside>
                <p>
                    <strong>@Html.ValidationMessageFor(m => m.Message)</strong>
                </p>
            </aside>
            @Html.TextAreaFor(m => m.Message, 10, 50, null)
        </div>                     

        @Html.AntiForgeryToken()
        <input id="contactOwnersButton" type="submit" value="Send" singleclickbutton="true" />
    </form>
}
else {
    <div id="messages">
        <div class="zone zone-messages">
            <div class="message message-Warning">
                <p>Sorry, the owners of this package do not allow contacting them through this form.</p>
            </div>
            <p class="description">Try visiting the project home page for the package in order to contact the package owner.</p>
        </div>
    </div>
}

@section BottomScripts {
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/gallery.form.js")" type="text/javascript"></script>
}